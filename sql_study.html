<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>SQL Study</title>
    <link rel="stylesheet" href="sql_study.css">
</head>
<body>
    <div class="accordion">
        <a href="index.html" id="home-btn">Home</a>
        <h2 class="main-title">Basic SQL Study</h2>
        
        <!-- SELECT 주제 -->
        <div class="topic-group">
            <h3 class="topic-title">Select</h3>
            <div class="accordion-item">
                <button class="accordion-header">
                    1757. Recyclable and Low Fat Products
                    <span class="difficulty easy">Easy</span>
                </button>
                <div class="accordion-content">
                    <a href="https://leetcode.com/problems/recyclable-and-low-fat-products/description/?envType=study-plan-v2&envId=top-sql-50" target="_blank" class="question-link">Question Link</a>
                    <p>Answer :</p>
                    <pre><code>select product_id
from products
where low_fats = 'Y' and recyclable = 'Y'</code></pre>
<pre><code>SQL은 항상 (sub query는 예외)
select ... 
from ... 
where ... 
group by ... 
order by ... 
having ... 순서의 형식을 가진다</code></pre>
                </div>
            </div>
            <div class="accordion-item">
                <button class="accordion-header">
                    584. Find Customer Referee
                    <span class="difficulty easy">Easy</span>
                    <!-- <span class="difficulty medium">Medium</span> -->
                </button>
                <div class="accordion-content">
                    <a href="https://leetcode.com/problems/find-customer-referee/description/?envType=study-plan-v2&envId=top-sql-50" target="_blank" class="question-link">Question Link</a>
                    <p>Answer :</p>
                    <pre><code>select name
from Customer
where referee_id != 2 or referee_id is null</code></pre>
<pre><code>SQL에서 <span class="keyword">not equal</span>는 python이랑 똑같음 <span class="keyword">!=</span></code></pre>
                </div>
            </div>

            <div class="accordion-item">
                <button class="accordion-header">
                    595. Big Countries
                    <span class="difficulty easy">Easy</span>
                    <!-- <span class="difficulty medium">Medium</span> -->
                </button>
                <div class="accordion-content">
                    <a href="https://leetcode.com/problems/big-countries/description/?envType=study-plan-v2&envId=top-sql-50" target="_blank" class="question-link">Question Link</a>
                    <p>Answer :</p>
                    <pre><code>select name, population, area
from World
where area >= 3000000 or population >= 25000000</code></pre>
<pre><code>문제 설명에 어쩔땐 <span class="keyword">at least</span> 가 있는데 이는 최소 이기 때문에 무조건 <span class="keyword">= </span>가 들어간다.</code></pre>
                </div>
            </div>

            <div class="accordion-item">
                <button class="accordion-header">
                    1148. Article Views I
                    <span class="difficulty easy">Easy</span>
                    <!-- <span class="difficulty medium">Medium</span> -->
                </button>
                <div class="accordion-content">
                    <a href="https://leetcode.com/problems/article-views-i/description/?envType=study-plan-v2&envId=top-sql-50" target="_blank" class="question-link">Question Link</a>
                    <p>Answer :</p>
                    <pre><code>select distinct(author_id) as id
from views
where viewer_id = author_id
order by author_id asc</code></pre>
<pre><code>SQL 문법 중에 <span class="keyword">order by</span>가 있음, 정렬 하는 용도 임으로 기본 값이 <span class="keyword">ascending (ASC)</span>임, 또는 <span class="keyword">내림차순 (Descending (DESC)도 가능)</span></code></pre>
                </div>
            </div>

            <div class="accordion-item">
                <button class="accordion-header">
                    1683. Invalid Tweets
                    <span class="difficulty easy">Easy</span>
                    <!-- <span class="difficulty medium">Medium</span> -->
                </button>
                <div class="accordion-content">
                    <a href="https://leetcode.com/problems/invalid-tweets/description/?envType=study-plan-v2&envId=top-sql-50" target="_blank" class="question-link">Question Link</a>
                    <p>Answer :</p>
                    <pre><code>select tweet_id 
from Tweets
where length(content) > 15</code></pre>
<pre><code>문제 설명에 어쩔땐 <span class="keyword">greater than</span> 이 있는데 이는 ~ 보다 크다를 의미함으로 <span class="keyword"> > </span>가 들어간다.</code></pre>
                </div>
            </div>

        </div>

        <!-- JOIN 주제 -->
        <div class="topic-group">
            <h3 class="topic-title">Basic Joins</h3>
            <div class="accordion-item">
                <button class="accordion-header">
                    1378. Replace Employee ID With The Unique Identifier
                    <span class="difficulty easy">Easy</span>
                    <!-- <span class="difficulty medium">Medium</span> -->
                </button>
                <div class="accordion-content">
                    <a href="https://leetcode.com/problems/replace-employee-id-with-the-unique-identifier/description/?envType=study-plan-v2&envId=top-sql-50" target="_blank" class="question-link">Question Link</a>
                    <p>Answer :</p>
                    <pre><code>select eu.unique_id, e.name
from employees as e 
left join employeeUNI as eu 
on e.id = eu.id</code></pre>
<pre><code>딱히 어려운거 없는듯, 굳히 말하면 <span class="keyword">join</span>, <span class="keyword">left join</span> 등 알아두기 ?</code></pre>
                </div>
            </div>

            <div class="accordion-item">
                <button class="accordion-header">
                    1068. Product Sales Analysis I
                    <span class="difficulty easy">Easy</span>
                    <!-- <span class="difficulty medium">Medium</span> -->
                </button>
                <div class="accordion-content">
                    <a href="https://leetcode.com/problems/product-sales-analysis-i/description/?envType=study-plan-v2&envId=top-sql-50" target="_blank" class="question-link">Question Link</a>
                    <p>Answer :</p>
                    <pre><code>select p.product_name, s.year, s.price
from sales as s 
left join product as p 
on s.product_id = p.product_id</code></pre>
<pre><code>이전 문제랑 같음</code></pre>
                </div>
            </div>

            <div class="accordion-item">
                <button class="accordion-header">
                    1581. Customer Who Visited but Did Not Make Any Transactions
                    <span class="difficulty easy">Easy</span>
                    <!-- <span class="difficulty medium">Medium</span> -->
                </button>
                <div class="accordion-content">
                    <a href="https://leetcode.com/problems/customer-who-visited-but-did-not-make-any-transactions/description/?envType=study-plan-v2&envId=top-sql-50" target="_blank" class="question-link">Question Link</a>
                    <p>Answer :</p>
                    <pre><code>select v.customer_id, count(*) as count_no_trans
from visits as v left join transactions as t on v.visit_id = t.visit_id
where t.transaction_id is NULL
group by v.customer_id</code></pre>
<pre><code><span class="keyword">join</span> 을 하면은 매치 안되는것 들은 <span class="keyword">NULL</span> 이 생성된 다는거 잊지말기, 문제의 주요점은 방문했지만 물건을 안 산 횟수를 구하는게 문제이다.</code></pre>
                </div>
            </div>

            <div class="accordion-item">
                <button class="accordion-header">
                    197. Rising Temperature
                    <span class="difficulty easy">Easy</span>
                    <!-- <span class="difficulty medium">Medium</span> -->
                </button>
                <div class="accordion-content">
                    <a href="https://leetcode.com/problems/rising-temperature/description/?envType=study-plan-v2&envId=top-sql-50" target="_blank" class="question-link">Question Link</a>
                    <p>Answer :</p>
                    <pre><code>select w2.id
from weather as w1, weather as w2
where datediff(w2.recorddate, w1.recorddate) = 1 and w2.temperature > w1.temperature</code></pre>
<pre><code><span class="keyword">datediff</span> 사용하는 방법 알기 !, 그리고 SQL에서는 날짜를 그냥 <span class="keyword">'20xx-xx-xx' < '2025-03-7'</span> 이렇게 비교 할 수 있음.</code></pre>
                </div>
            </div>

            <div class="accordion-item">
                <button class="accordion-header">
                    1661. Average Time of Process per Machine
                    <span class="difficulty easy">Easy</span>
                    <!-- <span class="difficulty medium">Medium</span> -->
                </button>
                <div class="accordion-content">
                    <a href="https://leetcode.com/problems/average-time-of-process-per-machine/description/?envType=study-plan-v2&envId=top-sql-50" target="_blank" class="question-link">Question Link</a>
                    <p>Answer :</p>
                    <pre><code>select a1.machine_id, round(avg(a2.timestamp - a1.timestamp), 3) as processing_time
from activity as a1, activity as a2
where a2.machine_id = a1.machine_id and a2.activity_type = 'end' and a1.activity_type = 'start'
group by a1.machine_id</code></pre>
<pre><code>해당 문제는 <span class="keyword">round , avg , timestamp </span> 사용하는 방법 알기 !</code></pre>
                </div>
            </div>

            <div class="accordion-item">
                <button class="accordion-header">
                    577. Employee Bonus
                    <span class="difficulty easy">Easy</span>
                    <!-- <span class="difficulty medium">Medium</span> -->
                </button>
                <div class="accordion-content">
                    <a href="https://leetcode.com/problems/employee-bonus/description/?envType=study-plan-v2&envId=top-sql-50" target="_blank" class="question-link">Question Link</a>
                    <p>Answer :</p>
                    <pre><code>select e.name, b.bonus
from employee as e left join bonus as b on e.empID = b.empID
where b.bonus < 1000 or b.bonus is NULL</code></pre>
<pre><code>해당 문제는 <span class="keyword">less than </span>은 <span class="keyword"><</span> 를 의미함. 반대로 <span class="keyword">greater than </span>은 <span class="keyword">></span> 를 의미함 </code></pre>
                </div>
            </div>

            <div class="accordion-item">
                <button class="accordion-header">
                    1280. Students and Examinations
                    <span class="difficulty easy">Easy</span>
                    <!-- <span class="difficulty medium">Medium</span> -->
                </button>
                <div class="accordion-content">
                    <a href="https://leetcode.com/problems/students-and-examinations/description/?envType=study-plan-v2&envId=top-sql-50" target="_blank" class="question-link">Question Link</a>
                    <p>Answer :</p>
                    <pre><code>select st.student_id, st.student_name, su.subject_name, count(ex.subject_name) as attended_exams
from students as st 
cross join subjects as su
left join examinations as ex on st.student_id = ex.student_id and su.subject_name = ex.subject_name
group by st.student_id, su.subject_name
order by st.student_id, su.subject_name</code></pre>
<pre><code>해당 문제는 <span class="keyword">cross join </span>을 알아야함. 두가지 table인 <span class="keyword">Students table:, Subjects table:</span>를 합치고 <span class="keyword">group by를 통해 묶어주고 계산하면 끝.</span></code></pre>
<img src="basic_joins/cross_join.png" alt="Cross Join Example">
                </div>
            </div>

            <div class="accordion-item">
                <button class="accordion-header">
                    570. Managers with at Least 5 Direct Reports
                    <span class="difficulty medium">Medium</span>
                    <!-- <span class="difficulty medium">Medium</span> -->
                </button>
                <div class="accordion-content">
                    <a href="https://leetcode.com/problems/managers-with-at-least-5-direct-reports/description/?envType=study-plan-v2&envId=top-sql-50" target="_blank" class="question-link">Question Link</a>
                    <p>Answer :</p>
                    <pre><code>select e.name
from employee as e
where e.id IN(
    select em.managerId
    from employee as em
    group by em.managerId
    having count(em.managerId) >= 5
)</code></pre>
<pre><code>해당 문제는 <span class="keyword">sub query </span>를 배우는 문제로 <span class="keyword">where </span>문에 또 다른 query를 사용해 조건을 추출해내는 것을 알 수 있다. <span class="keyword">group</span> 문 다음에는 <span class="keyword">having</span> 까먹지말기, <span class="keyword">where </span>아님.</code></pre>
                </div>
            </div>

        </div>

        <!-- 나머지 부분은 동일 -->
    </div>
    <script src="sql_study.js"></script>
</body>
</html>